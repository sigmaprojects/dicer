(function(t){function e(e){for(var r,c,s=e[0],o=e[1],l=e[2],d=0,h=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,s=1;s<a.length;s++){var o=a[s];0!==i[o]&&(r=!1)}r&&(n.splice(e--,1),t=c(c.s=a[0]))}return t}var r={},i={app:0},n=[];function c(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=r,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(a,r,function(e){return t[e]}.bind(null,r));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("a026"),i=a("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("DrawerContents")],1),a("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("Dicer")])],1),a("v-content",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1),a("v-footer",{attrs:{color:"indigo",app:""}},[a("span",{staticClass:"white--text"},[t._v("Â© 2019")])])],1)},c=[],s={name:"App",components:{},props:{source:String},data:function(){return{drawer:null}},mounted:function(){},beforeCreate:function(){},methods:{}},o=s,l=a("2877"),u=a("6544"),d=a.n(u),h=a("7496"),v=a("40dc"),f=a("5bc1"),m=a("a523"),p=a("a75b"),g=a("553a"),b=a("f774"),k=a("2a7f"),_=Object(l["a"])(o,n,c,!1,null,null,null),y=_.exports;d()(_,{VApp:h["a"],VAppBar:v["a"],VAppBarNavIcon:f["a"],VContainer:m["a"],VContent:p["a"],VFooter:g["a"],VNavigationDrawer:b["a"],VToolbarTitle:k["a"]});var C=a("f309");r["a"].use(C["a"]);var w=new C["a"]({}),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{"two-line":""}},[a("v-subheader",[t._v("My Characters")]),t._l(this.characters,(function(e){return a("div",{key:e.id},[a("v-divider"),a("v-list-item",{attrs:{to:{name:"playcharacter",params:{characterid:e.id}}}},[a("v-avatar",{attrs:{color:"indigo"}},[a("span",{staticClass:"white--text headline"},[t._v(t._s(e.name.substring(0,2).toUpperCase()))])]),a("v-list-item-content",{staticClass:"pa-md-4"},[a("v-list-item-title",[t._v(t._s(e.name))]),a("v-list-item-subtitle",[t._v(t._s(e.attacks.length)+" Attacks / "+t._s(e.getDiceCount())+" Dmg Dice")])],1),a("v-btn",{staticClass:"float-right",attrs:{small:"",color:"warning",to:{name:"editcharacter",params:{characterid:e.id}}}},[t._v("Edit")])],1)],1)})),a("v-divider"),a("v-list-item",{attrs:{link:"",to:"/editcharacter/-1"}},[a("v-avatar",{attrs:{color:"indigo"}},[a("span",{staticClass:"white--text headline"},[t._v("??")])]),a("v-list-item-content",{staticClass:"pa-md-4"},[a("v-list-item-title",[t._v("New Character")]),a("v-list-item-subtitle",[t._v("Create a new character to manage")])],1),a("v-btn",{staticClass:"float-right",attrs:{small:"",color:"warning",to:"/editcharacter/-1"}},[t._v("Create")])],1)],2)},A=[],V={name:"CharactersList",data:function(){return{characters:[]}},mounted:function(){this.characters=this.$CharacterDAO.list()},methods:{persistCharacters:function(){}}},D=V,O=a("8212"),j=a("8336"),$=a("ce7e"),S=a("8860"),I=a("da13"),N=a("5d23"),E=a("e0c7"),L=Object(l["a"])(D,x,A,!1,null,null,null),T=L.exports;d()(L,{VAvatar:O["a"],VBtn:j["a"],VDivider:$["a"],VList:S["a"],VListItem:I["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"],VSubheader:E["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[this.characterid>=0?a("v-icon",{staticClass:"float-right",attrs:{color:"red",small:""},on:{click:t.deleteCharacter}},[t._v("mdi-delete-forever-outline")]):t._e(),a("v-text-field",{attrs:{label:"Character Name",rules:t.validate_lengths},model:{value:t.character.name,callback:function(e){t.$set(t.character,"name",e)},expression:"character.name"}}),a("h3",[t._v("Attacks")]),t._l(t.character.attacks,(function(e,r){return a("div",{key:e.id,staticStyle:{"padding-bottom":"5px"}},[a("v-card",{staticClass:"mx-auto",attrs:{outlined:"",fluid:""}},[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",[a("div",{staticClass:"overline sm-1"},[a("v-icon",{staticClass:"float-left",attrs:{color:"red",small:""},on:{click:function(e){return t.deleteAttack(r)}}},[t._v("mdi-delete-forever-outline")]),r>0?a("v-icon",{staticClass:"float-right",attrs:{color:"grey"},on:{click:function(e){return t.array_move(t.character.attacks,r,r-1)}}},[t._v("mdi-menu-up")]):t._e(),r<t.character.attacks.length-1?a("v-icon",{staticClass:"float-right",attrs:{color:"grey"},on:{click:function(e){return t.array_move(t.character.attacks,r,r+1)}}},[t._v("mdi-menu-down")]):t._e()],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-text-field",{attrs:{dense:"",label:"Attack Label",rules:t.validate_lengths},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"attack.name"}})],1),a("v-col",[a("v-text-field",{attrs:{dense:"",label:"Dice (2d8, 1d4, etc)",value:t.parseDice(e.dice),rules:t.validate_dice},on:{input:function(e){return t.updateDice(e,r)}}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-text-field",{attrs:{type:"number",label:"+To hit",rules:t.validate_number},model:{value:e.hit,callback:function(a){t.$set(e,"hit",a)},expression:"attack.hit"}})],1),a("v-col",[a("v-text-field",{attrs:{type:"number",label:"+Dmg",rules:t.validate_number},model:{value:e.dmg,callback:function(a){t.$set(e,"dmg",a)},expression:"attack.dmg"}})],1)],1)],1)],1)],1)],1)})),a("v-btn",{staticClass:"float-left",attrs:{small:"",color:"primary"},on:{click:function(e){return t.addAttack()}}},[t._v("+ Add Another Attack")]),a("v-btn",{staticClass:"float-right",attrs:{small:"",color:"normal",type:"button"},on:{click:t.validate}},[t._v("Save & Finish")])],2)},P=[],F=(a("cb29"),a("caad"),a("a434"),a("b0c0"),a("4fad"),a("acd8"),a("e25e"),a("2532"),a("5319"),a("1276"),a("159b"),a("2909")),H=a("3835"),J=a("d4ec"),M=a("bee2"),q=function(){function t(e,a,r){Object(J["a"])(this,t),this.id=e||0,this.name=a||"",Array.isArray(r)?this.attacks=r:this.attacks=[new B]}return Object(M["a"])(t,[{key:"getDiceCount",value:function(){for(var t=0,e=0;e<this.attacks.length;e++)t+=this.attacks[e].dice.length;return t}},{key:"getHumanReadableDiceForAttack",value:function(t){var e="",a={};return this.attacks[t].dice.forEach((function(t){a[t]=(a[t]||0)+1})),Object.entries(a).forEach((function(t){var a=Object(H["a"])(t,2),r=a[0],i=a[1];e=e+i+"d"+r+" "})),e}}],[{key:"fromJSON",value:function(e){return Object.assign(new t,e)}}]),t}(),B=function t(e,a,r,i,n){Object(J["a"])(this,t),this.id=e||0,this.name=a||"",this.hit=r||0,this.dmg=n||0,Array.isArray(i)?this.dice=i:this.dice=[]},K=function(t){return!isNaN(parseFloat(t))&&!isNaN(t-0)},z={name:"EditCharacter",props:["characterid"],components:{},data:function(){return{character:new q,validate_lengths:[function(t){return!!t||"Required."},function(t){return(t||"").length<=20||"Max 20 characters"}],validate_number:[function(t){return K(t)||"Required, must be numeric"}],validate_dice:[function(t){return!!t.length||"Required."},function(t){return t.replace(/[^0-9d.,\- ]/g,"").length==t.length||"Not valid dice."}]}},mounted:function(){this.character=this.$CharacterDAO.get(this.characterid),window.fntest=function(){}},methods:{persistCharacter:function(){var t=this.$CharacterDAO.save(this.characterid,this.character);this.$router.push("/"),console.log(t)},validate:function(){if(this.$refs.form.validate())return this.persistCharacter(),!1},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},parseDice:function(t){var e="",a={};return t.forEach((function(t){a[t]=(a[t]||0)+1})),Object.entries(a).forEach((function(t){var a=Object(H["a"])(t,2),r=a[0],i=a[1];e=e+i+"d"+r+" "})),e},updateDice:function(t,e){var a=U(t,e);0==!a&&(this.character.attacks[e].dice=a)},array_move:function(t,e,a){if(a>=t.length){var r=a-t.length+1;while(r--)t.push(void 0)}return t.splice(a,0,t.splice(e,1)[0]),t},deleteAttack:function(t){var e=this.character.attacks[t];confirm("Confirm Delete of Attack: "+e.name)&&this.character.attacks.splice(t,1)},deleteCharacter:function(){if(confirm("Confirm Delete The Character: "+this.character.name)){var t=this.$CharacterDAO.list();t.splice(this.characterid,1),this.$CharacterDAO.saveAll(t),this.$router.push("/")}},addAttack:function(){this.character.attacks.push(new B(this.character.attacks.length))}},computed:{}},U=function(t){for(var e=t.split(/[., +-/_]/),a=[],r=0;r<e.length;r++){var i=e[r];if(i.length>0&&i.includes("d")&&i.replace(/[^0-9]/g,"").length>1){var n=i.split("d");if(n[0].replace(/[^0-9]/g,"").length!=n[0].length||n[1].replace(/[^0-9]/g,"").length!=n[1].length)return!1;var c=new Array(parseInt(n[0])).fill(n[1]);a.push.apply(a,Object(F["a"])(c))}}return a},G=z,Q=a("b0af"),W=a("62ad"),X=a("4bd4"),Y=a("132d"),Z=a("0fd9"),tt=a("8654"),et=Object(l["a"])(G,R,P,!1,null,null,null),at=et.exports;d()(et,{VBtn:j["a"],VCard:Q["a"],VCol:W["a"],VForm:X["a"],VIcon:Y["a"],VListItem:I["a"],VListItemContent:N["a"],VRow:Z["a"],VTextField:tt["a"]});var rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:"",to:"/"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Characters")])],1)],1),a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"https://github.com/sigmaprojects/dicer/",target:"_blank"}},[a("v-list-item",[a("v-list-item-action",[a("v-icon",[t._v("mdi-contact-mail")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Contact / Issues")])],1)],1)],1),a("v-list-item",{on:{click:t.resetall}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-delete")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Reset All")])],1)],1)],1)},it=[],nt={name:"DrawerContents",components:{},data:function(){return{}},mounted:function(){},methods:{resetall:function(){confirm("This will delete all saved characters and attacks, are you sure you want to continue?")&&(this.$CharacterDAO.saveAll([]),this.$router.push("/"))}}},ct=nt,st=a("1800"),ot=Object(l["a"])(ct,rt,it,!1,null,null,null),lt=ot.exports;d()(ot,{VIcon:Y["a"],VList:S["a"],VListItem:I["a"],VListItemAction:st["a"],VListItemContent:N["a"],VListItemTitle:N["c"]});var ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("Play")]),a("v-text-field",{attrs:{label:"Dolled Dice (d20's)"},on:{keypress:function(e){return t.isDiceRoll(e)},input:function(e){return t.updateRolls(e)}},model:{value:t.rolleddice,callback:function(e){t.rolleddice=e},expression:"rolleddice"}}),a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{"no-gutters":""}},t._l(this.character.attacks,(function(e){return a("v-col",{key:e.id,staticClass:"attack-container",attrs:{cols:"12",sm:"12",md:"6",lg:"6"},on:{click:function(e){return t.selectAttack(e)}}},[a("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center"}},[[a("v-col",[a("div",{staticClass:"overline mb-1"},[t._v(t._s(e.name))]),a("v-list-item-subtitle",[t._v(" "+t._s(t.character.getHumanReadableDiceForAttack(e.id))+" +"),a("span",{staticClass:"deep-orange--text"},[t._v(t._s(e.hit)+" Hit")]),t._v(" +"),a("span",{staticClass:"orange--text"},[t._v(t._s(e.dmg)+" Dmg")])])],1)],[a("v-col",[a("span",{ref:"tohit",refInFor:!0,staticClass:"headline red--text"}),a("v-checkbox",{staticClass:"shrink mr-2 mt-0 mb-0 ml-0 float-right hashit",attrs:{label:"Hit","hide-details":"",value:e.id,id:"checkbox"+e.id}})],1)]],2)],1)],1)})),1)],1),a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{"no-gutters":""}},t._l(this.diceTypes,(function(e){return a("v-col",{key:e.name},[a("v-badge",{staticClass:"align-self-center",attrs:{top:"",right:"",overlap:"overlap",color:"error"},scopedSlots:t._u([{key:"badge",fn:function(){return[t.hits[e.value]>0?a("span",[t._v(t._s(t.hits[e.value]))]):t._e()]},proxy:!0}],null,!0)},[a("v-icon",{attrs:{size:"xxx-large"}},[t._v(t._s(e.icon))])],1)],1)})),1),a("div",{staticClass:"text-center mt-1"},[t.hitdice.length>0||t.totalDmg.length>0?a("v-sheet",{attrs:{color:"primary lighten-2"}},[t._v(" "+t._s(t.hitdice)+" "+t._s(t.totalDmg)+" ")]):t._e()],1)],1)],1)},dt=[],ht=(a("99af"),a("d81d"),{name:"PlayCharacter",props:["characterid"],data:function(){return{character:new q,rolleddice:"",hitdice:"",totalDmg:"",diceTypes:[{name:"d4",value:4,icon:"mdi-dice-d4-outline"},{name:"d6",value:6,icon:"mdi-dice-d6-outline"},{name:"d8",value:8,icon:"mdi-dice-d8-outline"},{name:"d10",value:10,icon:"mdi-dice-d10-outline"},{name:"d12",value:12,icon:"mdi-dice-d12-outline"},{name:"d20",value:20,icon:"mdi-dice-d20-outline"}],hits:vt()}},mounted:function(){this.character=this.$CharacterDAO.get(this.characterid)},methods:{foo:function(){},isDiceRoll:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e&&32!==e&&45!==e&&44!==e))return!0;t.preventDefault()},updateRolls:function(t){var e=t.split(/[., +-/_]/);if(e[e.length-1].length>0)for(var a=0;a<e.length;a++){var r=e[a];r.length>0&&a<this.character.attacks.length&&this.updateToHit(r,a)}},updateToHit:function(t,e){var a=this.character.attacks[e];this.$refs.tohit[e].textContent=+a.hit+ +t},selectAttack:function(t){var e=t.target.closest("div.v-input");if(!e){var a=t.target.closest(".attack-container").querySelector('input[type="checkbox"]');a.checked?a.checked=!1:a.checked=!0,a.dispatchEvent(new Event("change"))}this.updateResults()},updateResults:function(){for(var t=this,e=document.querySelectorAll("input[id^='checkbox'][checked=true], input[id^='checkbox']:checked"),a=Array.prototype.map.call(e,(function(t){return t.value})),r=0,i=[],n=0;n<a.length;n++){var c=a[n];i=i.concat(this.character.attacks[c].dice),r+=+this.character.attacks[c].dmg}var s={};i.forEach((function(t){s[t]=(s[t]||0)+1})),this.hits=vt(),this.hitdice="",this.totalDmg="",Object.entries(s).forEach((function(e){var a=Object(H["a"])(e,2),r=a[0],i=a[1];t.hitdice=t.hitdice+" "+i+"d"+r+"  ",t.hits[r]=i})),this.totalDmg="+"+r+" Damage",console.log(this.hitdice)}},computed:{}});function vt(){return{4:0,6:0,8:0,10:0,12:0,20:0}}var ft=ht,mt=a("4ca6"),pt=a("ac7c"),gt=a("8dd9"),bt=Object(l["a"])(ft,ut,dt,!1,null,null,null),kt=bt.exports;d()(bt,{VBadge:mt["a"],VCard:Q["a"],VCheckbox:pt["a"],VCol:W["a"],VContainer:m["a"],VIcon:Y["a"],VListItemSubtitle:N["b"],VRow:Z["a"],VSheet:gt["a"],VTextField:tt["a"]});var _t=function(){function t(){Object(J["a"])(this,t),this.charactersKey="characters"}return Object(M["a"])(t,[{key:"list",value:function(){var t=JSON.parse(localStorage.getItem(this.charactersKey));Array.isArray(t)||(t=[]);for(var e=0;e<t.length;e++)t[e]=q.fromJSON(t[e]);return t}},{key:"get",value:function(t){var e=this.list();return t<0?new q(e.length):e[t]}},{key:"saveAll",value:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++){t[e].id=e;for(var a=0;a<t[e].attacks.length;a++)t[e].attacks[a].id=a}localStorage.setItem(this.charactersKey,JSON.stringify(t))}return new Array}},{key:"save",value:function(t,e){var a=this.list();t<0?a[a.length]=e:a[t]=e,this.saveAll(a)}},{key:"sanitizee",value:function(){return!1}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&!isNaN(t-0)}}]),t}();r["a"].use(i["a"]),r["a"].component("CharactersList",T),r["a"].component("EditCharacter",at),r["a"].component("DrawerContents",lt),r["a"].component("PlayCharacter",kt),r["a"].config.productionTip=!1,r["a"].prototype.$CharacterDAO=new _t;var yt=[{path:"/play/:characterid",component:kt,props:!0,name:"playcharacter"},{path:"/editcharacter/:characterid",component:at,props:!0,name:"editcharacter"},{path:"/",component:T}],Ct=new i["a"]({routes:yt});new r["a"]({router:Ct,vuetify:w,render:function(t){return t(y)}}).$mount("#app")}});
//# sourceMappingURL=app.72972272.js.map